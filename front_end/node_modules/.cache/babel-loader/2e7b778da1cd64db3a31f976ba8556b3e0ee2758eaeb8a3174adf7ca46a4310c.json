{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tode_/Desktop/\\u0E1B2\\u0E172/test_space/software-dev/front_end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/tode_/Desktop/\\u0E1B2\\u0E172/test_space/software-dev/front_end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/tode_/Desktop/\\u0E1B2\\u0E172/test_space/software-dev/front_end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./../Style/EditProfile.css';import{Link,useParams,useNavigate}from\"react-router-dom\";import{useState,useEffect}from\"react\";import{variables}from\"../Variables\";import Swal from'sweetalert2';import withReactContent from'sweetalert2-react-content';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AppPayment(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),price=_useState2[0],setPrice=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();useEffect(function(){fetch(variables.API_URL+\"get_order/\"+id,{method:\"GET\",headers:{'Accept':'application/json, text/plain','Content-Type':'application/json;charset=UTF-8'}}).then(function(response){return response.json();}).then(function(result){console.log(result);if(result.length>0){setOrder(result[0]);}});},[]);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var MySwal;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:MySwal=withReactContent(Swal);e.preventDefault();if(price.toString()!==order.total_price.toString()){MySwal.fire({html:'<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+'ยอดเงินไม่ตรงกัน'+'</p>',icon:\"error\",confirmButtonColor:\"#F07221\"});}else{fetch(variables.API_URL+\"pay_order\",{method:\"POST\",headers:{'Accept':'application/json, text/plain','Content-Type':'application/json;charset=UTF-8'},body:JSON.stringify({id:id,price:price})}).then(function(response){return response.json();}).then(function(result){if(result.msg){MySwal.fire({html:/*#__PURE__*/_jsx(\"p\",{children:result.msg}),icon:\"success\",confirmButtonColor:\"#F07221\"}).then(function(){navigate(\"/confirm/\"+id+\"/1\");});}else{MySwal.fire({html:'<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+result.error+'</p>',icon:\"error\",confirmButtonColor:\"#F07221\"});}});}case 3:case\"end\":return _context.stop();}},_callee);}));return _handleSubmit.apply(this,arguments);}function handleCancel(_x2){return _handleCancel.apply(this,arguments);}function _handleCancel(){_handleCancel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var MySwal;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:MySwal=withReactContent(Swal);e.preventDefault();fetch(variables.API_URL+\"cancel_order\",{method:\"POST\",headers:{'Accept':'application/json, text/plain','Content-Type':'application/json;charset=UTF-8'},body:JSON.stringify({id:id})}).then(function(response){return response.json();}).then(function(result){if(result.msg){MySwal.fire({html:/*#__PURE__*/_jsx(\"p\",{children:result.msg}),icon:\"success\",confirmButtonColor:\"#F07221\"}).then(function(){navigate(\"/History\");});}else{MySwal.fire({html:'<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+result.error+'</p>',icon:\"error\",confirmButtonColor:\"#F07221\"});}});case 3:case\"end\":return _context2.stop();}},_callee2);}));return _handleCancel.apply(this,arguments);}if(order.id){return/*#__PURE__*/_jsx(\"div\",{className:\"EditProfile\",children:/*#__PURE__*/_jsx(\"div\",{className:\"contianer-ED\",children:/*#__PURE__*/_jsx(\"div\",{className:\"ED-frame\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"ED-form\",onSubmit:function onSubmit(e){handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"span\",{className:\"topic-ED\",children:[\"Payment\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"topic-ED\",children:[\"total_price : \",order.total_price,\" B\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-frame\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-frame\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input\",id:\"register-FirstName\",type:\"number\",placeholder:\"First Name\",value:price,onChange:function onChange(e){return setPrice(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"symbol\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-wallet\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"submit-frame\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"submit\",type:\"submit\",value:\"submit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cancel\",onClick:function onClick(e){handleCancel(e);},children:/*#__PURE__*/_jsx(\"center\",{children:\"Cancel\"})})]})]})]})})})});}}export default AppPayment;","map":{"version":3,"names":["Link","useParams","useNavigate","useState","useEffect","variables","Swal","withReactContent","jsx","_jsx","jsxs","_jsxs","AppPayment","_useState","_useState2","_slicedToArray","price","setPrice","_useState3","_useState4","order","setOrder","_useParams","id","navigate","fetch","API_URL","method","headers","then","response","json","result","console","log","length","handleSubmit","_x","_handleSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","MySwal","wrap","_callee$","_context","prev","next","preventDefault","toString","total_price","fire","html","icon","confirmButtonColor","body","JSON","stringify","msg","children","error","stop","handleCancel","_x2","_handleCancel","_callee2","_callee2$","_context2","className","onSubmit","type","placeholder","value","onChange","target","required","onClick"],"sources":["C:/Users/tode_/Desktop/ป2ท2/test_space/software-dev/front_end/src/Components/Payment.js"],"sourcesContent":["import './../Style/EditProfile.css';\r\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {variables} from \"../Variables\";\r\nimport Swal from 'sweetalert2'\r\nimport withReactContent from 'sweetalert2-react-content'\r\n\r\nfunction AppPayment(){\r\n    const [price, setPrice] = useState(0);\r\n    const [order, setOrder] = useState('');\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        fetch(variables.API_URL+\"get_order/\"+id, {\r\n            method: \"GET\",\r\n            headers: {\r\n                'Accept': 'application/json, text/plain',\r\n                'Content-Type': 'application/json;charset=UTF-8'\r\n            },\r\n            })\r\n            .then(response => response.json())\r\n            .then(result => {\r\n                console.log(result)\r\n                if(result.length > 0){\r\n                    setOrder(result[0])\r\n                }\r\n            }\r\n        )\r\n    }, [])\r\n\r\n    async function handleSubmit(e){\r\n        const MySwal = withReactContent(Swal);\r\n        e.preventDefault();\r\n        if(price.toString() !== order.total_price.toString()){\r\n            MySwal.fire({\r\n                html: \r\n                    '<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+\r\n                    'ยอดเงินไม่ตรงกัน'+\r\n                    '</p>',\r\n                icon: \"error\",\r\n                confirmButtonColor: \"#F07221\"\r\n            })\r\n        }else{\r\n            fetch(variables.API_URL+\"pay_order\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Accept': 'application/json, text/plain',\r\n                    'Content-Type': 'application/json;charset=UTF-8'\r\n                },\r\n                body: JSON.stringify({\r\n                    id: id,\r\n                    price: price\r\n                }),\r\n                })\r\n                .then(response => response.json())\r\n                .then(result => {\r\n                    if(result.msg){\r\n                        MySwal.fire({\r\n                            html: <p>{result.msg}</p>,\r\n                            icon: \"success\",\r\n                            confirmButtonColor: \"#F07221\"\r\n                        }).then(() => {\r\n                            navigate(\"/confirm/\"+id+\"/1\");\r\n                        })\r\n                    } \r\n                    else{\r\n                        MySwal.fire({\r\n                            html: \r\n                                '<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+\r\n                                result.error+\r\n                                '</p>',\r\n                            icon: \"error\",\r\n                            confirmButtonColor: \"#F07221\"\r\n                        })\r\n                    }\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    async function handleCancel(e){\r\n        const MySwal = withReactContent(Swal);\r\n        e.preventDefault();\r\n        \r\n        fetch(variables.API_URL+\"cancel_order\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Accept': 'application/json, text/plain',\r\n                'Content-Type': 'application/json;charset=UTF-8'\r\n            },\r\n            body: JSON.stringify({\r\n                id: id\r\n            }),\r\n            })\r\n            .then(response => response.json())\r\n            .then(result => {\r\n                if(result.msg){\r\n                    MySwal.fire({\r\n                        html: <p>{result.msg}</p>,\r\n                        icon: \"success\",\r\n                        confirmButtonColor: \"#F07221\"\r\n                    }).then(() => {\r\n                        navigate(\"/History\");\r\n                    })\r\n                } \r\n                else{\r\n                    MySwal.fire({\r\n                        html: \r\n                            '<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+\r\n                            result.error+\r\n                            '</p>',\r\n                        icon: \"error\",\r\n                        confirmButtonColor: \"#F07221\"\r\n                    })\r\n                }\r\n            }\r\n        )\r\n        \r\n    }\r\n\r\n    if(order.id){\r\n        return(\r\n            <div className='EditProfile'>\r\n                <div className=\"contianer-ED\">\r\n                    <div className=\"ED-frame\">\r\n                        <form id=\"ED-form\" onSubmit={(e)=>{handleSubmit(e)}}>\r\n                            <span className=\"topic-ED\">\r\n                            Payment<br />\r\n                            </span>\r\n                            <span className=\"topic-ED\">\r\n                            total_price : {order.total_price} B<br />\r\n                            </span>\r\n                            <div className=\"input-frame\">\r\n                            <div className=\"input-frame\">\r\n                                <input className=\"input\" id=\"register-FirstName\" type=\"number\"\r\n                                placeholder=\"First Name\" value={price} onChange={(e) => setPrice(e.target.value)} required/>\r\n                                <span className=\"symbol\">\r\n                                    <i className=\"fa-solid fa-wallet\"></i>\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"submit-frame\">\r\n                                <input id=\"submit\" type=\"submit\" value=\"submit\" />\r\n                                <div className='cancel' onClick={(e)=>{handleCancel(e)}}><center>Cancel</center></div>\r\n                            </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            );\r\n    }\r\n}\r\n\r\nexport default AppPayment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}